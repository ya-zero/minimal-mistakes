---
title: "Python netmiko mikrotik"
date: 2019-03-22 00:52:51 +0000
categories:
  - python
tags:
  - python,network automation,netmiko
---


Устал  пользоваться модулем paramiko, а netmiko не работал. попробовал использовать ansible , вроде работает.  
Но  уперся что бы запустить netmiko.

вот пост на github https://github.com/ktbyers/netmiko/issues/1016



```python
# -*- coding: utf-8 -*-
# iz spiska yaml
import netmiko
import logging
from pprint import pprint

# выполнение одной комманды из списка commands=[,,,,]
def send_show_command(dev,commands):
    with  netmiko.ConnectHandler(**dev,default_enter="\n\r") as ssh:
#          print ('prompt:',ssh.find_prompt())
          result=ssh.send_command(commands)
    return result

logging.basicConfig(filename='test.log',level=logging.DEBUG)
command = '/interface print brief'
show_command=send_show_command({'device_type':'cisco_ios','username':'root+ct80h','password':'root','verbose':True,'ip':'192.168.30.20'},command)
print(show_command)
```
